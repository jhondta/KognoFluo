# frozen_string_literal: true

# User model
class User < ApplicationRecord
  # -- -------------------------------------------------------------------------
  # -- Constants ---------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Enums -------------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Associations ------------------------------------------------------------
  has_one :profile, class_name: 'UserProfile', foreign_key: :user_id,
          dependent: :destroy
  has_one :technician, class_name: 'Maintenance::Technician',
          foreign_key: :user_id, dependent: :restrict_with_error

  # -- -------------------------------------------------------------------------
  # -- Scopes ------------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Validations -------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Callbacks ---------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Delegations -------------------------------------------------------------
  delegate :full_name, to: :profile

  # -- -------------------------------------------------------------------------
  # -- Include default devise modules. Others available are: :omniauthable -----
  devise :database_authenticatable, :argon2, :registerable, :recoverable,
         :rememberable, :validatable, :confirmable, :lockable, :timeoutable,
         :trackable

  # -- -------------------------------------------------------------------------
  # -- Methods -----------------------------------------------------------------
end
