# frozen_string_literal: true

# User model
class User < ApplicationRecord
  # -- -------------------------------------------------------------------------
  # -- Constants ---------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Concerns ----------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Attributes --------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Extensions --------------------------------------------------------------

  # Include default devise modules. Others available are: :omniauthable
  devise :database_authenticatable, :argon2, :registerable, :recoverable,
         :rememberable, :validatable, :confirmable, :lockable, :timeoutable,
         :trackable

  # -- -------------------------------------------------------------------------
  # -- Enums -------------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Associations ------------------------------------------------------------
  has_one :profile, class_name: 'Profile', foreign_key: :user_id,
          dependent: :destroy
  has_one :technician, class_name: 'Maintenance::Technician',
          foreign_key: :user_id, dependent: :restrict_with_error

  # -- -------------------------------------------------------------------------
  # -- Validations -------------------------------------------------------------
  accepts_nested_attributes_for :profile

  # -- -------------------------------------------------------------------------
  # -- Callbacks ---------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Scopes ------------------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Delegations -------------------------------------------------------------
  delegate :first_name, to: :profile, allow_nil: true
  delegate :last_name, to: :profile, allow_nil: true
  delegate :birth_date, to: :profile, allow_nil: true
  delegate :gender, to: :profile, allow_nil: true
  delegate :biography, to: :profile, allow_nil: true
  delegate :full_name, to: :profile, allow_nil: true
  delegate :avatar, to: :profile, allow_nil: true

  # -- -------------------------------------------------------------------------
  # -- Class Methods -----------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Instance Methods --------------------------------------------------------

  # -- -------------------------------------------------------------------------
  # -- Private Methods ---------------------------------------------------------
end
