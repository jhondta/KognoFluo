<div class="grid gap-6">
  <!-- Selección de Activo -->
  <div class="p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
    <h3 class="text-lg font-medium mb-4 dark:text-white">
      Selección de Activo
    </h3>
    <div class="grid md:grid-cols-3 gap-4"
         data-controller="select"
         data-select-param-value="selected_id">

      <div>
        <%= form.label :maintenance_asset_id, "Activo",
                       class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
        <%= form.collection_select :maintenance_asset_id,
                                   Maintenance::Asset.active, :id, :name,
                                   { prompt: 'Seleccionar activo...',
                                     selected: @maintenance_plan.asset&.id },
                                   { class: 'bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg
                                                   focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5
                                                   dark:bg-gray-700 dark:border-gray-600 dark:text-white',
                                     data: { select_target: 'select',
                                             select_child_id: 'component-select',
                                             action: 'change->select#update' } } %>
      </div>

      <div>
        <%= form.label :maintenance_asset_component_id, "Componente (Opcional)",
                       class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
        <%= form.collection_select :maintenance_asset_component_id,
                                   @maintenance_plan.asset&.components || [], :id, :name,
                                   { prompt: 'Seleccionar componente...',
                                     selected: @maintenance_plan.component&.id },
                                   { id: 'component-select',
                                     class: 'bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg
                                                   focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5
                                                   dark:bg-gray-700 dark:border-gray-600 dark:text-white',
                                     disabled: @maintenance_plan.asset.nil?,
                                     data: { select_target: 'select',
                                             select_url: components_maintenance_asset_path(':parentId'),
                                             select_placeholder: 'Seleccionar componente...',
                                             select_keep_placeholder: true } } %>
      </div>
    </div>
  </div>

  <!-- Recursos Necesarios -->
  <div class="p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
    <h3 class="text-lg font-medium mb-4 dark:text-white">
      Recursos Necesarios
    </h3>

    <div class="grid md:grid-cols-2 gap-6">
      <!-- Herramientas -->
      <div>
        <h4 class="text-base font-medium mb-3 dark:text-white">
          Herramientas
        </h4>


        <div class="mb-3 p-4 bg-gray-50 rounded-lg dark:bg-gray-700">
          <div class="grid grid-cols-2 gap-3">
            <div>
              <%= form.label :maintenance_tool_id, "Herramienta",
                             class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
              <%= form.collection_select :maintenance_tool_id,
                                         Maintenance::Tool.all, :id, :name,
                                         { prompt: "Seleccionar..." },
                                         class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              %>
            </div>
            <div>
              <%= form.label :quantity, "Cantidad",
                             class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
              <%= form.number_field :quantity,
                                    class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white",
                                    min: 1
              %>
            </div>
          </div>
          <%= form.hidden_field :resource_type, value: 'tool' %>
        </div>
      </div>

      <!-- Especialidades -->
      <div>
        <h4 class="text-base font-medium mb-3 dark:text-white">
          Especialidades
        </h4>


        <div class="mb-3 p-4 bg-gray-50 rounded-lg dark:bg-gray-700">
          <div class="grid grid-cols-2 gap-3">
            <div>
              <%= form.label :specialty_type, "Especialidad",
                             class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
              <%= form.select :specialty_type,
                              enum_options_for_select(Maintenance::PlanResource, :specialty_type),
                              { prompt: "Seleccionar..." },
                              class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              %>
            </div>
            <div>
              <%= form.label :hours_required, "Horas Requeridas",
                             class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
              <%= form.number_field :hours_required,
                                    class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white",
                                    step: 0.5,
                                    min: 0.5
              %>
            </div>
          </div>
          <%= form.hidden_field :resource_type, value: 'specialty' %>
        </div>
      </div>
    </div>
  </div>
</div>
