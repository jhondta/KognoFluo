<!-- Tabs -->
<%= render 'maintenance/plans/sections/tabs' %>

<!-- Tab Content -->
<div id="tab-content" class="h-full">
  <%= form_with(model: maintenance_plan, id: 'plan_form') do |form| %>
    <%= render partial: 'shared/error_messages', locals: { resource: maintenance_plan } %>
    <div class="hidden py-4 pt-6" id="general" role="tabpanel" aria-labelledby="general-tab">
      <div class="grid gap-6">
        <!-- Información General -->
        <div class="p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
          <h3 class="text-lg font-medium mb-4">Información General</h3>

          <div class="grid md:grid-cols-2 gap-4">
            <!-- Primera columna -->
            <div class="space-y-4">
              <div>
                <%= form.label :plan_type, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
                <%= form.select :plan_type,
                                enum_options_for_select(maintenance_plan.class, :plan_type),
                                {},
                                class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                %>
              </div>

              <div>
                <%= form.label :code, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
                <%= form.text_field :code,
                                    class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                %>
              </div>

              <div>
                <%= form.label :criticality, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
                <%= form.select :criticality,
                                enum_options_for_select(maintenance_plan.class, :criticality),
                                {},
                                class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                %>
              </div>
            </div>

            <!-- Segunda columna -->
            <div class="space-y-4">
              <div>
                <%= form.label :status, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
                <%= form.select :status,
                                enum_options_for_select(maintenance_plan.class, :status),
                                {},
                                class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                %>
              </div>

              <div>
                <%= form.label :name, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
                <%= form.text_field :name,
                                    class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                %>
              </div>

              <!-- Campo de duración con horas y minutos -->
              <div>
                <%= form.label :estimated_duration, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
                <div class="grid grid-cols-2 gap-2">
                  <div>
                    <%= form.number_field :duration_hours,
                                          class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white",
                                          placeholder: "Horas"
                    %>
                  </div>
                  <div>
                    <%= form.number_field :duration_minutes,
                                          class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white",
                                          placeholder: "Minutos"
                    %>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Campos de ancho completo -->
          <div class="mt-4">
            <%= form.label :description, class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
            <%= form.text_area :description,
                               rows: 3,
                               class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            %>
          </div>

          <div class="mt-4">
            <label class="relative inline-flex items-center cursor-pointer">
              <%= form.check_box :requires_shutdown,
                                 class: "sr-only peer",
                                 data: { action: "change->form#toggleShutdown" }
              %>
              <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
              <span class="ml-3 text-sm font-medium text-gray-900 dark:text-gray-300">Requiere paro de equipo</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Components -->
    <div class="hidden py-4 pt-6 bg-white rounded-lg dark:bg-gray-800" id="components" role="tabpanel"
         aria-labelledby="components-tab">
      <div class="grid gap-6">
        <!-- Selección de Activo -->
        <div class="p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
          <h3 class="text-lg font-medium mb-4">Selección de Activo</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <%= form.label :maintenance_asset_id, "Activo",
                             class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
              <%= form.collection_select :maintenance_asset_id,
                                         Maintenance::Asset.active, :id, :name,
                                         { prompt: "Seleccionar activo..." },
                                         data: { action: "change->form#loadComponents" },
                                         class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg
                                                 focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5
                                                 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              %>
            </div>

            <div>
              <%= form.label :maintenance_asset_component_id, "Componente (Opcional)",
                             class: "block mb-2 text-sm font-medium text-gray-900 dark:text-white" %>
              <%= form.collection_select :maintenance_asset_component_id,
                                         @maintenance_plan.asset&.components || [],
                                         :id, :name,
                                         { prompt: "Seleccionar componente..." },
                                         class: "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg
                                                 focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5
                                                 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              %>
            </div>
          </div>
        </div>

        <!-- Recursos Necesarios -->
        <div class="p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
          <h3 class="text-lg font-medium mb-4">Recursos Necesarios</h3>

          <div class="grid md:grid-cols-2 gap-6">
            <!-- Herramientas -->
            <!-- div>
     
            </div -->

            <!-- Especialidades -->
            <!--div>

            </div -->
          </div>
        </div>
      </div>
    </div>

    <!-- Documents -->
    <div class="hidden py-4 pt-6 bg-white rounded-lg dark:bg-gray-800" id="documents" role="tabpanel"
         aria-labelledby="documents-tab">

    </div>

    <!-- Assignees -->
    <div class="hidden py-4 pt-6 bg-white rounded-lg dark:bg-gray-800" id="assignees" role="tabpanel"
         aria-labelledby="assignees-tab">

    </div>

    <!-- History -->
    <div class="hidden py-4 pt-6 bg-white rounded-lg dark:bg-gray-800" id="history" role="tabpanel"
         aria-labelledby="history-tab">

    </div>
  <% end %>
</div>
